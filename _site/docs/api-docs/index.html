<!DOCTYPE HTML>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>API Docs</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="generator" content="ClusterRunner">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!--[if lt IE 9]>
  <script src="/js/html5shiv.min.js"></script>
  <script src="/js/respond.min.js"></script>
  <![endif]-->
</head>


<body class="wrap">
  <header>
  <div class="os-banner hide-on-mobiles">
    <div class="grid one-third">
        <a href="http://opensource.box.com/"><img src="http://opensource.box.com/assets/images/logo.png"></a>
    </div>
  </div>

  <nav class="mobile-nav show-on-mobiles">
    <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="current">
    <a href="/docs/home/">Doc<span class="show-on-mobiles">s</span><span class="hide-on-mobiles">umentation</span></a>
  </li>
  <li class="">
    <a href="/news/">Blog</a>
  </li>
  <li>
    <a href="https://github.com/box/ClusterRunner"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

  </nav>
  <div class="grid">
    <div class="unit one-third center-on-mobiles" style="padding:25px 0 20px 0">
      <h1>
        <a href="/">
          <span>ClusterRunner</span>
          <img src="/img/box_clusterrunner_sml.png" height="80" alt="Logo">
        </a>
      </h1>
    </div>
    <nav class="main-nav unit two-thirds hide-on-mobiles">
      <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="current">
    <a href="/docs/home/">Doc<span class="show-on-mobiles">s</span><span class="hide-on-mobiles">umentation</span></a>
  </li>
  <li class="">
    <a href="/news/">Blog</a>
  </li>
  <li>
    <a href="https://github.com/box/ClusterRunner"><span class="hide-on-mobiles">View on </span>GitHub</a>
  </li>
</ul>

    </nav>
  </div>
</header>

    <section class="docs">
    <div class="grid">

      <div class="docs-nav-mobile unit whole show-on-mobiles">
  <select onchange="if (this.value) window.location.href=this.value">
    <option value="">Navigate the docsâ€¦</option>
    
    <optgroup label="Getting Started">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/home/">Welcome</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/features/">Features</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/installation/">Installation</option>
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/quickstart/">Quick Start</option>
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="Tutorials">
      


  

  
    
  
    
  
    
  
    
  
    
      <option value="/docs/configuring-your-project/">Configuring Your Job</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
      <option value="/docs/ci-integration/">Integrating with CI</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="Reference">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/job-configuration/">Job Configuration</option>
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/service-configuration/">Service Configuration</option>
    
  
    
  
    
  

  

  
    
      <option value="/docs/api-docs/">API Docs</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  

  
    
  
    
  
    
      <option value="/docs/build-result-format/">Build Result Format</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
    <optgroup label="Contribute">
      


  

  
    
  
    
  
    
  
    
  
    
  
    
      <option value="/docs/development-guide/">Development Guide</option>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


    </optgroup>
    
  </select>
</div>


      <div class="unit one-fifth hide-on-mobiles">
  <aside>
    
    <h4>Getting Started</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/home/">Welcome</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/features/">Features</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/installation/">Installation</a></li>
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/quickstart/">Quick Start</a></li>
    
  
    
  
    
  
    
  


</ul>

    
    <h4>Tutorials</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/configuring-your-project/">Configuring Your Job</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/ci-integration/">Integrating with CI</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>Reference</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/job-configuration/">Job Configuration</a></li>
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/service-configuration/">Service Configuration</a></li>
    
  
    
  
    
  


  

  
    
  

  
    
      <li class="current"><a href="/docs/api-docs/">API Docs</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
      <li class=""><a href="/docs/build-result-format/">Build Result Format</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
    <h4>Contribute</h4>
    

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/development-guide/">Development Guide</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


</ul>

    
  </aside>
</div>


      <div class="unit four-fifths">
        <article>
          <h1>API Docs</h1>
          <p>ClusterRunner is built around a REST API. We use HMAC along with a configurable application
secret for securing communication between service components. JSON is returned in all responses,
and is used in POST requests.</p>

<h2 id="authentication">Authentication</h2>

<p>You authenticate a request by providing a header key-value pair for
ClusterRunner-Message-Authentication-Digest.  The value of the HMAC is generated using
the body of the request along with a secret is located in clusterrunner.conf.</p>

<h2 id="responses">Responses</h2>

<p>ClusterRunner uses HTTP response codes to indicate success or failure as well as a JSON body
for additional information.  The JSON response will include request specific information, along
with a STATUS field that will either be SUCCESS or FAILURE.</p>

<h2 id="versioning">Versioning</h2>

<p>We version all of our APIs and make a major version bump whenever we make incompatible changes.
Currently we are on v1.</p>

<h2 id="builds">Builds</h2>

<p>The build endpoint is located on the clusterrunner master.</p>

<p><strong>List all builds</strong></p>

<p>Request</p>

<p><code>GET /build</code></p>

<p>Response</p>

<pre>
{
  "builds": [
    {
      ...
    }
  ],
  "child_routes": {
    ...
  }
}
</pre>

<p><strong>Get information about a single build</strong></p>

<p>Request</p>

<p><code>GET /build/1/ </code></p>

<p>Response</p>

<pre>
"build": {
    "details": "534 of 637 subjobs are complete (83.8%).",
    "num_subjobs": 637,
    "failed_atoms": null,
    "artifacts": null,
    "status": "BUILDING",
    "result": null,
    "num_atoms": 2684,
    "id": 1,
    "error_message": null
}
</pre>

<p><strong>Creating a new build</strong></p>

<p>To run a new build, you create a new build object.  The response will contain the
id of the new build object, which you can can later poll for the status of your
build.  A build can have a status of either BUILDING, SUCCESS, or FAILURE.
While a request is building, certain fields on the object may remain
null.  On completion, all the fields will contain their actual values.</p>

<p>Request</p>

<p><code>POST /build</code></p>

<p>Creating a new build object requires properly authenticating your request with the correct HMAC,
(see Authentication), and providing a JSON body that defines your build.  Here are the available
arguments for creating a build:</p>

<div class="mobile-side-scroller">
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr class="setting">
      <td>
        <p class="name"><strong>type</strong></p>
      </td>
      <td>
        <p style="color:red">Required</p>
        <p>The project type of the new build. Should be set to "git".</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>job_name</strong></p>
      </td>
      <td>
        <p style="color:red">Required</p>
        <p>The name of the job to run on the new build.</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>url</strong></p>
      </td>
      <td>
        <p style="color:red">Required</p>
        <p>url to the git repo</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>remote</strong></p>
      </td>
      <td>
        <p>Optional</p>
        <p>The git remote name to fetch from</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>branch</strong></p>
      </td>
      <td>
        <p>Optional</p>
        <p>The git remote branch name to fetch from</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>hash</strong></p>
      </td>
      <td>
        <p>Optional</p>
        <p>The git hash on the remote to reset hard to</p>
      </td>
    </tr>
    <tr class="setting">
      <td>
        <p class="name"><strong>remote_files</strong></p>
      </td>
      <td>
        <p>Optional</p>
        <p>JSON dictionary that maps downloadable URI's to output file names.
            If present, each URI will be downloaded into the build workspace under the
            specified name.  </p>
      </td>
    </tr>
  </tbody>
</table>
</div>

<p>Response</p>

<p><code>202 ACCEPTED</code></p>

<pre>
{"build_id": 1, "STATUS": "SUCCESS"}
</pre>

          <div class="section-nav">
  <div class="left align-right">
    
      
      
      
        

          
          

        
        
      
        

          
          

        

          
          
            
          

        

          
          
            <a href="/docs/service-configuration/" class="prev">Back</a>
            
            
        

      
    
  </div>

  <div class="right align-left">
    
      
      
      
        

          
          

        

          
          

        

          
          

        

          
          

        
        
      
        

          
          

        

          
          

        
        
      
        

          
          

        

          
          

        

          
          
            
          

        

          
          
            <a href="/docs/build-result-format/" class="next">Next</a>
            
            
        

      
    
  </div>
  <div class="clear"></div>
</div>


        </article>
      </div>


      <div class="clear"></div>

    </div>
  </section>


  <footer>
  <div class="grid">
    <div class="unit one-third center-on-mobiles">
      <p>Box Open Source</p>
    </div>
    <div class="unit two-thirds align-right center-on-mobiles">
      <p>
        Proudly hosted by
        <a href="https://github.com">
          <img src="/img/footer-logo.png" width="100" height="30" alt="GitHub â€¢ Social coding">
        </a>
      </p>
    </div>
  </div>
</footer>

  <script>
  var anchorForId = function (id) {
    var anchor = document.createElement("a");
    anchor.className = "header-link";
    anchor.href      = "#" + id;
    anchor.innerHTML = "<i class=\"fa fa-link\"></i>";
    return anchor;
  };

  var linkifyAnchors = function (level, containingElement) {
    var headers = containingElement.getElementsByTagName("h" + level);
    for (var h = 0; h < headers.length; h++) {
      var header = headers[h];

      if (typeof header.id !== "undefined" && header.id !== "") {
        header.appendChild(anchorForId(header.id));
      }
    }
  };

  document.onreadystatechange = function () {
    if (this.readyState === "complete") {
      var contentBlock = document.getElementsByClassName("docs")[0] || document.getElementsByClassName("news")[0];
      if (!contentBlock) {
        return;
      }
      for (var level = 1; level <= 6; level++) {
        linkifyAnchors(level, contentBlock);
      }
    }
  };
</script>

  
  <!-- Gauges (http://gaug.es/) -->
  <script>
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', 'ZZZ');
      t.src = '//secure.gaug.es/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>



  <!-- Google Analytics (http://google.com/analytics) -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'ZZZ', 'clusterrunner.com');
    ga('send', 'pageview');

  </script>



</body>
</html>
